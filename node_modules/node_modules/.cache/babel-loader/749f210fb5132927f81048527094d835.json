{"ast":null,"code":"var _jsxFileName = \"F:\\\\React\\\\dog-classifier\\\\src\\\\App.js\";\nimport React, { useReducer, useState, useRef } from 'react';\nimport './App.css';\nimport * as mobilenet from '@tensorflow-models/mobilenet';\nconst stateMachine = {\n  initial: 'initial',\n  states: {\n    initial: {\n      on: {\n        next: 'loadingModel'\n      }\n    },\n    loadingModel: {\n      on: {\n        next: 'awaitingUpload'\n      }\n    },\n    awaitingUpload: {\n      on: {\n        next: 'ready'\n      }\n    },\n    ready: {\n      on: {\n        next: 'classifying'\n      }\n    },\n    classifying: {\n      on: {\n        next: 'complete'\n      }\n    },\n    complete: {\n      on: {\n        next: 'awaitingUpload'\n      }\n    }\n  }\n};\n\nconst reducer = (currentState, event) => stateMachine.states[currentState].on[event] || stateMachine.initial;\n\nfunction App() {\n  const [state, dispatch] = useReducer(reducer, stateMachine.initial);\n  const [model, setModel] = useState(null);\n  const [imageURL, setImageUrl] = useState(null);\n  const inputRef = useRef();\n\n  const next = () => dispatch('next');\n\n  const loadModel = async () => {\n    next();\n    const mobilenetModel = await mobilenet.load();\n    setModel(mobilenetModel);\n    next();\n  };\n\n  const handleUpload = e => {\n    const {\n      files\n    } = e.target;\n\n    if (files.length > 0) {\n      const url = URL.createObjectURL(false[0]);\n      setImageUrl(url);\n    }\n  };\n\n  const buttonProps = {\n    initial: {\n      text: 'Load Model',\n      actions: loadModel\n    },\n    loadingModel: {\n      text: 'Loading Model...',\n      actions: () => {}\n    },\n    awaitingUpload: {\n      text: 'Upload Photo',\n      actions: () => {}\n    },\n    ready: {\n      text: 'Identifier',\n      actions: () => {}\n    },\n    classifying: {\n      text: 'Identifying',\n      actions: () => {}\n    },\n    complete: {\n      text: 'Reset',\n      actions: () => {}\n    }\n  };\n  return /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 50,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"img\", {\n    alt: \"upload-preview\",\n    src: imageURL,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 51,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"file\",\n    accept: \"image/*\",\n    capture: \"camera\",\n    ref: inputRef,\n    onChange: handleUpload,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 52,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(\"button\", {\n    onClick: buttonProps[state].action,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 53,\n      columnNumber: 7\n    }\n  }, \" \", buttonProps[state].text));\n}\n\nexport default App;","map":{"version":3,"sources":["F:/React/dog-classifier/src/App.js"],"names":["React","useReducer","useState","useRef","mobilenet","stateMachine","initial","states","on","next","loadingModel","awaitingUpload","ready","classifying","complete","reducer","currentState","event","App","state","dispatch","model","setModel","imageURL","setImageUrl","inputRef","loadModel","mobilenetModel","load","handleUpload","e","files","target","length","url","URL","createObjectURL","buttonProps","text","actions","action"],"mappings":"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","sourcesContent":["import React, { useReducer,useState, useRef } from 'react';\nimport './App.css';\nimport * as mobilenet from '@tensorflow-models/mobilenet';\n\nconst stateMachine = {\n  initial :'initial',\n  states : { \n  initial : { on : {next : 'loadingModel'}},\n  loadingModel: { on : {next: 'awaitingUpload'}},\n  awaitingUpload:{ on : {next: 'ready'}},\n  ready : { on : {next: 'classifying'}},\n  classifying: { on : {next: 'complete'}},\n  complete : { on : {next: 'awaitingUpload'}}\n}\n}\nconst reducer = (currentState, event) => stateMachine.states[currentState].on[event] || stateMachine.initial;\n\nfunction App() {\n  const [state,dispatch] = useReducer(reducer,stateMachine.initial);\n  const [model,setModel] = useState(null);\n  const [imageURL,setImageUrl] = useState(null);\n  const inputRef = useRef();\n\n  const next = () => dispatch('next')\n\n  \n  const loadModel = async () => {\n    next();\n    const mobilenetModel = await mobilenet.load();\n    setModel(mobilenetModel);\n    next();\n\n  }\n  const handleUpload = e => {\n    const { files } = e.target;\n    if (files.length > 0){\n      const url = URL.createObjectURL(false[0]);\n      setImageUrl(url);\n    }\n  }\n  const buttonProps = {\n    initial : { text : 'Load Model', actions: loadModel },\n    loadingModel : { text : 'Loading Model...', actions: () => {}},\n    awaitingUpload : {  text : 'Upload Photo', actions: () => {}},\n    ready : {  text : 'Identifier', actions: () => {}},\n    classifying : {  text : 'Identifying', actions: () => {}},\n    complete : {  text : 'Reset', actions: () => {}}\n  }\n  return (\n    <div>\n      <img alt=\"upload-preview\" src={imageURL} />\n      <input type=\"file\" accept=\"image/*\" capture=\"camera\" ref={inputRef} onChange={handleUpload}/>\n      <button onClick={buttonProps[state].action}> {buttonProps[state].text}</button>\n    </div>\n  );\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}